{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2>Customer Service Officer Dashboard</h2>

    <!-- Form for submitting a new request on behalf of a client -->
    <h3>Submit Event Request for a Client</h3>
    <form action="{{ url_for('submit_request') }}" method="POST">
        <label for="client_username">Client Username:</label>
        <input type="text" id="client_username" name="client_username" required>

        <label for="event_name">Event Name:</label>
        <input type="text" id="event_name" name="event_name" required>

        <label for="event_date">Event Date:</label>
        <input type="date" id="event_date" name="event_date" required>

        <label for="budget">Budget:</label>
        <input type="number" id="budget" name="budget" required min="0" step="0.01">

        <label for="details">Event Details:</label>
        <textarea id="details" name="details" rows="4" required></textarea>

        <button type="submit">Submit Request</button>
    </form>

    <!-- Table displaying all client submissions -->
    <h3>All Event Requests</h3>
    {% if requests %}
        <table>
            <tr>
                <th>Tracking ID</th>
                <th>Client Username</th>
                <th>Event Name</th>
                <th>Event Date</th>
                <th>Budget</th>
                <th>Status</th>
                <th>Submitted At</th>
            </tr>
            {% for request in requests %}
                <tr>
                    <td>{{ request.id }}</td>
                    <td>{{ request.client_username }}</td>
                    <td>{{ request.event_name }}</td>
                    <td>{{ request.event_date }}</td>
                    <td>${{ request.budget }}</td>
                    <td>{{ request.status }}</td>
                    <td>{{ request.submitted_at }}</td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No event requests found.</p>
    {% endif %}
</div>
{% endblock %}